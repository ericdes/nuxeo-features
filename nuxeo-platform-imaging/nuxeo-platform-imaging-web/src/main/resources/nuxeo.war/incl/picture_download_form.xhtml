<div xmlns="http://www.w3.org/1999/xhtml"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:h="http://java.sun.com/jsf/html" 
  xmlns:nxh="http://nuxeo.org/nxweb/html"
  xmlns:f="http://java.sun.com/jsf/core"    
  xmlns:rich="http://richfaces.org/rich"
  xmlns:nxu="http://nuxeo.org/nxweb/util">
  
  <rich:modalPanel id="imagingPanel" autosized="true"
    onmaskclick="Richfaces.hideModalPanel('imagingPanel')">

    <f:facet name="header">
      <h:outputText value="#{messages['label.picture.download']}" />
    </f:facet>
    
  <f:facet name="controls">
    <h:panelGroup>
      <h:graphicImage value="/icons/action_delete_mini.gif"
        id="hideImgPopup" />
      <rich:componentControl for="imagingPanel" attachTo="hideImgPopup"
        operation="hide" event="onclick" />
    </h:panelGroup>
  </f:facet>

  <h:form>

    <h:outputText value="#{messages['label.picture.download.header']}" />
    
    <h:selectManyCheckbox layout="pageDirection"
      value="#{pictureBookManager.selectedViews}">
      <f:selectItems value="#{pictureBookManager.selectItems}" />
    </h:selectManyCheckbox>


    <div onclick="Richfaces.hideModalPanel('imagingPanel')">
      <nxh:commandLink class="imagingPanelDownloadLink" action="#{pictureBookManager.downloadSelectedBook}">
        <h:outputText value="#{messages['action.picture.dlSelected']}" />
      </nxh:commandLink>
      <nxh:commandLink class="imagingPanelDownloadLink" action="#{pictureBookManager.downloadAll}">
        <h:outputText value="#{messages['action.picture.dlAll']}" />
      </nxh:commandLink>
    </div>
  </h:form>
</rich:modalPanel>
</div>