<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<nxthemes:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:nxthemes="http://nuxeo.org/nxthemes"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:nxdir="http://nuxeo.org/nxdirectory">

  <ui:define name="page title">Nuxeo 5 EP</ui:define>

  <ui:define name="body">
    <nxu:methodResult name="isAdministrator"
      value="#{currentNuxeoPrincipal.isAdministrator()}">

      <h:form>
        <div><ui:include src="/userManager_action_tabs.xhtml" />
        <div style="clear:both"></div>
        </div>

        <div class="tabsContent"><br />

        <ui:decorate template="/incl/back_link.xhtml">
          <ui:param name="doAction" value="view_users" />
        </ui:decorate>

        <ui:include src="/incl/message_banner.xhtml"/>

        <br />
        <h1><h:outputText value="#{selectedUser.name}" /></h1>

        <ui:decorate template="/incl/delete_link.xhtml">
          <ui:param name="doDelete" value="delete_user" />
        </ui:decorate>

        <div><ui:include
          src="/userManager_edit_password_subtabs.xhtml" />
        <div style="clear:both" />
        </div>

        <div class="tabsContent">

        <table class="dataInput">
        <tbody>
          <tr>
            <td class="labelColumn"><h:outputText value="${messages['password']}"
              styleClass="required" /></td>
            <td class="fieldColumn"><h:inputSecret id="h_inputText_password1"
              value="#{userManagerActions.changed_password}"
              class="dataInputText" required="true" /> <h:message
              styleClass="errorMessage" for="h_inputText_password1" /></td>
          </tr>

          <tr>
            <td class="labelColumn"><h:outputText value="${messages['password.verify']}"
              styleClass="required" /></td>
            <td class="fieldColumn"><h:inputSecret id="h_inputText_password2"
              value="#{userManagerActions.changed_password_verify}"
              class="dataInputText" required="true" /> <h:message
              styleClass="errorMessage" for="h_inputText_password2" /></td>
          </tr>
          <tr>
            <td></td>
            <td><h:commandButton type="submit"
              value="#{messages['command.save']}"
              action="#{userManagerActions.changePassword}" class="button" />
              
              <h:commandButton class="button" value="#{messages['command.cancel']}"
          		action="view_users" immediate="true" />
            </td>
          </tr>
        </tbody>
        </table>
        </div>
        <!--  inner tabsContent --></div>
        <!-- outer tabsContent -->
      </h:form>

    </nxu:methodResult>
  </ui:define>

</nxthemes:composition>
