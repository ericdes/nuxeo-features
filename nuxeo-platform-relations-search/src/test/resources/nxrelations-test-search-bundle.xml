<?xml version="1.0"?>
<component name="org.nuxeo.ecm.platform.relations.services.RelationService">

  <implementation
    class="org.nuxeo.ecm.platform.relations.services.RelationService" />

  <service>
    <provide interface="org.nuxeo.ecm.platform.relations.api.RelationManager" />
  </service>

  <extension target="org.nuxeo.ecm.platform.api.PlatformService"
    point="servers">
    <server name="default">
      <service class="org.nuxeo.ecm.platform.relations.api.RelationManager"
        jndiName="%RelationManagerBean" />
    </server>
  </extension>

  <extension-point name="graphtypes">
    <object
      class="org.nuxeo.ecm.platform.relations.descriptors.GraphTypeDescriptor" />
  </extension-point>

  <!-- Graph type example for tests -->
  <extension
    target="org.nuxeo.ecm.platform.relations.services.RelationService"
    point="graphtypes">
    <graphtype name="dummygraph"
      class="org.nuxeo.ecm.platform.relations.DummyGraphType" />
  </extension>

  <!-- Graph type example with no implementation for tests -->
  <extension
    target="org.nuxeo.ecm.platform.relations.services.RelationService"
    point="graphtypes">
    <graphtype name="unexistentgraph"
      class="org.nuxeo.ecm.platform.relations.UnexistentGraphType" />
  </extension>

  <extension-point name="resourceadapters">
    <object
      class="org.nuxeo.ecm.platform.relations.descriptors.ResourceAdapterDescriptor" />
  </extension-point>

  <extension target="org.nuxeo.ecm.platform.relations.services.RelationService"
    point="resourceadapters">
    <adapter namespace="http://nuxeo.org/nxrelations/test/search/prop"
      class="org.nuxeo.ecm.platform.relations.search.resources.indexing.PropertyResourceAdapter" />
    <!-- Document Resource adapter example for tests -->
    <adapter namespace="http://nuxeo.org/nxrelations/test/search/doc/"
      class="org.nuxeo.ecm.platform.relations.search.FakeRelationIndexerDocumentResourceAdapter" />
    <adapter namespace="http://nuxeo.org/nxrelations/test/search/docfam/"
      class="org.nuxeo.ecm.platform.relations.search.FakeRelationIndexerDocumentResourceAdapter" />
  </extension>

  <extension-point name="graphs">
    <object
      class="org.nuxeo.ecm.platform.relations.descriptors.GraphDescriptor" />
  </extension-point>

  <!-- Graph example for tests -->
  <extension target="org.nuxeo.ecm.platform.relations.services.RelationService"
    point="graphs">
    <graph name="comment" type="dummygraph">
      <option name="backend">sql</option>
      <option name="host">localhost</option>
      <option name="port">8080</option>
      <namespaces>
        <namespace name="rdf">
          http://www.w3.org/1999/02/22-rdf-syntax-ns#
        </namespace>
        <namespace name="dc">http://purl.org/dc/elements/1.1/</namespace>
        <namespace name="nxdoc">http://nuxeo/org/nxrelations/test/search/doc</namespace>
        <namespace name="props">http://nuxeo/org/nxrelations/test/search/prop</namespace>
      </namespaces>
    </graph>
  </extension>

</component>
