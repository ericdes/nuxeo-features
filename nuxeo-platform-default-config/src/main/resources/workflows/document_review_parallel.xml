<?xml version="1.0" encoding="UTF-8"?>
<process-definition
    xmlns="" name="document_review_parallel">

  <event type="process-start">
    <script>
      <expression>
        executionContext.setVariable("workflow_review_type", "workflowDocumentReviewTypeParallel");
        executionContext.setVariable("workflowDirectives", new String[] {"workflowDirectiveCheck", "workflowDirectiveDiffusion", "workflowDirectiveOpinion"});
      </expression>
    </script>
  </event>

  <start-state name="start">
      <transition name="" to="fork1"></transition>
  </start-state>

  <task-node name="review" create-tasks="false" end-tasks="true" signal="last-wait">
    <task name="review">
      <assignment class="org.nuxeo.ecm.platform.workflow.jbpm.handlers.NuxeoAssignmentHandler"/>
    </task>
      <transition name="tr2" to="join1"></transition>
  </task-node>

  <end-state name="validated"/>
   <decision name="is document valid">
      <transition name="" to="validated"></transition>
      <transition name="tr2" to="trash"></transition>
   </decision>
   <fork name="fork1">
      <transition name="" to="review"></transition>
      <transition name="tr2" to="task update"></transition>
   </fork>
   <join name="join1">
      <transition name="" to="is document valid"></transition>
   </join>
   <node name="task update">
      <transition name="" to="join1"></transition>
   </node>
   <end-state name="trash"></end-state>
</process-definition>
