<div xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
  xmlns:nxu="http://nuxeo.org/nxweb/util"
  xmlns:c="http://java.sun.com/jstl/core"
  xmlns:nxd="http://nuxeo.org/nxweb/document"
  class="foldableBox">

  <h3 class="unfolded">
    <a href="#nogo" onclick="return toggleBox(this)">
      <h:outputText value="#{messages['title.dashboard.userTasks']}" />
    </a>
  </h3>

  <c:choose>
    <c:when test="#{not empty currentTaskInstances}">
      <div class="boxBody">
        <h:dataTable
          value="#{currentTaskInstances}" var="task"
          rowClasses="dataRowEven,dataRowOdd" styleClass="dataList">
          <h:column>
            <f:facet name="header">#{messages['label.workflow.task.name']}</f:facet>
            <c:set var="taskNameLabel" value="label.workflow.task.#{task.name}" />#{messages[taskNameLabel]}</h:column>
          <h:column>
            <f:facet name="header">#{messages['label.workflow.task.startDate']}</f:facet>
            <h:outputText value="#{task.create}" />
          </h:column>
          <h:column>
            <f:facet name="header">#{messages['label.title']}</f:facet>
            <nxd:documentLink
              document="#{jbpmService.getDocumentModel(task, currentUser)}"
              view="PROCESS"
              title="#{jbpmService.getDocumentModel(task, currentUser).title}" />
          </h:column>
        </h:dataTable>
      </div>
    </c:when>
    <c:otherwise>
      <h:outputText value="#{messages['label.dashboard.empty']}"/>
    </c:otherwise>
  </c:choose>

</div>
