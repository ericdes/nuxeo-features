<process-definition name="validation-review">
	<swimlane name="initiator" />
	<start-state>
		<task swimlane='initiator' />
		<transition to='choose participants node' />
	</start-state>
	<task-node name="choose participants node">
		<task name="choose-participant" swimlane="initiator" />
		<transition to="condition on participants" />
	</task-node>
	<decision name="condition on participants">
		<transition to="validate node" />
		<transition condition="#{empty participants}" to="end" />
	</decision>
	<task-node name="validate node">
		<task name="validate">
			<assignment actor-id="#{participants[0]}" />
		</task>
		<transition to="condition on participants">
			<script>
			  <variable name="participants"/>
			  <!-- not very elegant, needs to fix a list in variable instance to improve -->
			  <expression>
				if(participants.length > 1) {
				Object[] newarray = new Object[participants.length - 1];
				System.arraycopy(participants, 1, newarray, 0, participants.length
				-1);
				participants = newarray;
				} else {participants = null;}
				</expression>
			</script>
		</transition>
	</task-node>
	<end-state name="end" />
</process-definition>
